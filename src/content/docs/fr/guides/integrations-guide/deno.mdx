---
title: D√©ployez votre site Astro vers Deno
description: Comment d√©ployer votre site Astro sur le web en utilisant Deno.
type: deploy
i18nReady: true
---

Vous pouvez d√©ployer un site Astro rendu c√¥t√© serveur sur [Deno Deploy](https://deno.com/deploy), un syst√®me distribu√© qui ex√©cute JavaScript, TypeScript et WebAssembly √† la pointe de la technologie, dans le monde entier.

Ce guide comprend des instructions pour le d√©ploiement vers Deno Deploy via les actions GitHub ou le CLI de Deno Deploy.

## Requis

Ce guide suppose que vous avez d√©j√† install√© [Deno](https://deno.com/).

## Configuration du projet

Votre projet Astro peut √™tre d√©ploy√© sur [Deno Deploy](https://deno.com/deploy) en tant que site rendu c√¥t√© serveur (SSR). Deno Deploy ne prend pas en charge les sites statiques.

### Adaptateur pour SSR

Pour activer SSR dans votre projet Astro et le d√©ployer sur Deno Deploy :

Ajoutez [l'adaptateur Deno][Deno adapter] pour activer SSR dans votre projet Astro avec la commande `astro add` suivante. Cela installera l'adaptateur et apportera les changements appropri√©s √† votre fichier `astro.config.mjs` en une seule √©tape.

```bash
npx astro add deno
```

Si vous pr√©f√©rez installer l'adaptateur manuellement, suivez les deux √©tapes suivantes :

1. Installez [l'adaptateur `@astrojs/deno`][Deno adapter] dans les d√©pendances de votre projet en utilisant votre gestionnaire de paquets pr√©f√©r√©. Si vous utilisez npm ou si vous n'√™tes pas s√ªr, lancez ceci dans le terminal :
 
 ```bash
   npm install @astrojs/deno
    ```

1. Mettez √† jour votre fichier de configuration du projet `astro.config.mjs` avec les changements ci-dessous.

 ```js ins={3,6-7}
 // astro.config.mjs
 import { defineConfig } from 'astro/config';
 import deno from '@astrojs/deno';

 export default defineConfig({
   output: 'server',
   adapter: deno(),
 });
    ```

Ensuite, mettez √† jour votre script `preview` dans `package.json` avec le changement ci-dessous.

 ```json del={8} ins={9}
 // package.json
 {
   // ...
   "scripts": {
     "dev": "astro dev",
     "start": "astro dev",
     "build": "astro build",
     "preview": "astro preview"
     "preview": "deno run --allow-net --allow-read --allow-env ./dist/server/entry.mjs"
   }
 }
    ```

Vous pouvez maintenant utiliser cette commande pour pr√©visualiser votre site Astro de production localement avec Deno.

 ```bash
 npm run preview
    ```

## Comment d√©ployer


Vous pouvez d√©ployer Deno Deploy via les actions GitHub ou en utilisant l'interface de ligne de commande (CLI) de Deno Deploy.

### D√©ploiement des actions GitHub

Si votre projet est stock√© sur GitHub, le [site Deno Deploy](https://dash.deno.com/) vous guidera dans la configuration des actions GitHub pour d√©ployer votre site Astro.

1. Poussez votre code vers un d√©p√¥t GitHub public ou priv√©.

1. Connectez-vous sur [Deno Deploy](https://dash.deno.com/) avec votre compte GitHub, et cliquez sur [New Project](https://dash.deno.com).

1. S√©lectionnez votre d√©p√¥t, la branche √† partir de laquelle vous souhaitez vous d√©ployer, et s√©lectionnez le mode **GitHub Action**. (Votre site Astro n√©cessite une √©tape de construction, et ne peut pas utiliser le mode Automatique).
   
1. Dans votre projet Astro, cr√©ez un nouveau fichier √† `.github/workflows/deploy.yml` et collez le YAML ci-dessous. Ceci est similaire au YAML donn√© par Deno Deploy, avec les √©tapes suppl√©mentaires n√©cessaires pour votre site Astro.

 ```yaml
 name: Deploy
 on: [push]

 jobs:
   deploy:
     name: Deploiement
     runs-on: ubuntu-latest
     permissions:
       id-token: write # N√©cessaire pour l'authentification avec Deno Deploy
       contents: read # N√©cessaire pour cloner le d√©p√¥t

     steps:
       - name: Clonage du d√©p√¥t
         uses: actions/checkout@v3

       # Vous n'utilisez pas npm? Changez `npm ci` en `yarn install` ou `pnpm i`
       - name: Installation des d√©pendances
         run: npm ci
 
       # Vous n'utilisez pas npm? Changez `npm run build` en `yarn build` ou `pnpm run build`
       - name: Construction de Astro
         run: npm run build

       - name: T√©l√©chargement vers Deno Deploy
         uses: denoland/deployctl@v1
         with:
           project: my-deno-project # TODO: remplacer par le nom du projet Deno Deploy
           entrypoint: server/entry.mjs
           root: dist
    ```

1. Apr√®s avoir valid√© ce fichier YAML et l'avoir pouss√© sur votre branche de d√©ploiement configur√©e, le d√©ploiement devrait commencer automatiquement !

Vous pouvez suivre la progression en utilisant l'onglet "Actions" sur votre page de d√©p√¥t GitHub, ou sur [Deno Deploy](https://dash.deno.com).

### D√©ploiement CLI

1. Installez le [Deno Deploy CLI](https://docs.deno.com/deploy/manual/deployctl).

 ```bash
 deno install --allow-read --allow-write --allow-env --allow-net --allow-run --no-check -r -f https://deno.land/x/deploy/deployctl.ts
    ```

1. Ex√©cutez l'√©tape de construction de votre Astro.

 ```bash
 npm run build
    ```

1. Ex√©cutez `deployctl` pour d√©ployer !

Dans la commande ci-dessous, remplacez `<ACCESS-TOKEN>` par votre [Personal Access Token](https://dash.deno.com/account#access-tokens) et `<MY-DENO-PROJECT>` par le nom de votre projet Deno Deploy.
 ```bash
 DENO_DEPLOY_TOKEN=<ACCESS-TOKEN> deployctl deploy --project=<MY-DENO-PROJECT> --no-static --include=./dist ./dist/server/entry.mjs
    ```

Vous pouvez suivre tous vos d√©ploiements sur [Deno Deploy](https://dash.deno.com).

1. (Optionnel) Pour simplifier la construction et le d√©ploiement en une seule commande, ajoutez un script `deploy-deno` dans `package.json`.

 ```json ins={9}
 // package.json
 {
   // ...
   "scripts": {
     "dev": "astro dev",
     "start": "astro dev",
     "build": "astro build",
     "preview": "deno run --allow-net --allow-read --allow-env ./dist/server/entry.mjs",
     "deno-deploy": "npm run build && deployctl deploy --project=<MY-DENO-PROJECT> --no-static --include=./dist ./dist/server/entry.mjs"
   }
 }
    ```

Vous pouvez alors utiliser cette commande pour construire et d√©ployer votre site Astro en une seule √©tape.

 ```bash
 DENO_DEPLOY_TOKEN=<ACCESS-TOKEN> npm run deno-deploy
    ```


üìö En savoir plus sur [SSR in Astro](/fr/guides/server-side-rendering/).

[Deno adapter]: https://github.com/denoland/deno-astro-adapter
