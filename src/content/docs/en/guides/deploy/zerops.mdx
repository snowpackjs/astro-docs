---
title: Deploy your Astro Site to Zerops
description: How to deploy your Astro site to the web using Zerops.
type: deploy
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import { Steps } from '@astrojs/starlight/components';

[Zerops](https://zerops.io/) is a dev-first cloud platform that can be used to deploy both Static and SSR Astro site.

This guide will walk you through deploying of a static project and Node.js Project to Zerops.

## Prerequisites

- **An Astro project using the [`@astrojs/node` SSR adapter](/en/guides/integrations-guide/node/)** (for Node.js Project)
- **zCli** zerops cli (optional)
- **A Zerops account** - If you donâ€™t already have one, you can [create a Zerops account](https://zerops.io/) for free.

## Creating a Zerops Static project

:::tip[Start from a Static template]
The [Zerops x Astro - Static example app](https://github.com/zeropsio/recipe-astro-static) can be imported directly into your [Zerops Dashboard](https://app.zerops.io/dashboard/projects), and deployed in one click! 

```yaml
project:
  name: recipe-astro
  tags:
    - zerops-recipe

services:
  - hostname: app
    type: static@1.0
    enableSubdomainAccess: true
    buildFromGit: https://github.com/zeropsio/recipe-astro-static
```

The following YAML structure will setup a project called recipe-astro with a static service called app.
:::

First create a project using [Zerops `project add` wizard](https://app.zerops.io/dashboard/project-add) then create a static service for your Astro project.

#### Pushing your static app to Zerops

Now that you've prepared a Static service on Zerops,  you will need to create a `zerops.yml` file at the root of your project to trigger the build and deploy pipeline on Zerops.

The following example shows the configuration of the required build and operations for the project with hostname `app`:

  <PackageManagerTabs>
    <Fragment slot="npm">
    ```yaml title="zerops.yml"
    zerops:
      - setup: app # Should match with static service's name
        build:
          base: nodejs@20
          buildCommands:
            - npm i
            - npm build
          deployFiles:
            - dist/~
          cache:
            - node_modules
            - package-lock.json
        run:
          base: static
    ```
    </Fragment>
    <Fragment slot="pnpm">
    ```yaml title="zerops.yml"
    zerops:
      - setup: app # Should match with static service's name
        build:
          base: nodejs@20
          buildCommands:
            - pnpm i
            - pnpm build
          deployFiles:
            - dist/~
          cache:
            - node_modules
            - pnpm-lock.yaml
        run:
          base: static
    ```
    </Fragment>
    <Fragment slot="yarn">
    ```yaml title="zerops.yml"
    zerops:
      - setup: app # Should match with static service's name
        build:
          base: nodejs@20
          buildCommands:
            - yarn
            - yarn build
          deployFiles:
            - dist/~
          cache:
            - node_modules
            - yarn.lock
        run:
          base: static
    ```
    </Fragment>
  </PackageManagerTabs>

Now you can deploy this using zCli [Trigger the pipeline using zcli](#trigger-the-pipeline-using-zerops-cli-zcli) or you can Or you can import a github/gitlab repository which already has a `zerops.yml`


:::note
One Zerops project can contain multiple Astro apps.
:::

## Creating a Zerops Node.js project

:::tip[Start from a Node.js template]
The [Zerops x Astro - Node.js example app](https://github.com/zeropsio/recipe-astro-nodejs) can be imported directly into your [Zerops Dashboard](https://app.zerops.io/dashboard/projects), and deployed in one click!

```yaml
project:
  name: recipe-astro
  tags:
    - zerops-recipe

services:
  - hostname: app
    type: nodejs@20 
    buildFromGit: https://github.com/zeropsio/recipe-astro-nodejs
    ports:
      - port: 4321
        httpSupport: true
    enableSubdomainAccess: true
    minContainers: 1
```

The following YAML structure will setup a project called recipe-astro with a Node.js v20 service called app.
:::

You can create a Node.js service for your Astro site through the [Zerops `project add` wizard](https://app.zerops.io/dashboard/project-add), or by importing an Astro site using [`zerops-project-import.yaml`](https://github.com/zeropsio/recipe-astro-nodejs/blob/main/zerops-project-import.yml).



#### Pushing your Node.js app to Zerops

Now that you've prepared a Node.js service on Zerops,  you will need to create a `zerops.yml` file at the root of your project to trigger the build and deploy pipeline on Zerops.

The following example shows the configuration of the required build and operations for the project with hostname `app`:

  <PackageManagerTabs>
    <Fragment slot="npm">
    ```yaml title="zerops.yml"
    zerops:
      - setup: app
        build:
          base: nodejs@20
          buildCommands:
            - npm i
            - npm run build
          deployFiles:
            - dist
            - package.json
            - node_modules
          cache:
            - node_modules
            - package-lock.json
        run:
          base: nodejs@20
          ports:
            - port: 3000
              httpSupport: true
          envVariables:
            PORT: 3000
            HOST: 0.0.0.0
          start: npm start
    ```
    </Fragment>
    <Fragment slot="pnpm">
    ```yaml title="zerops.yml"
    zerops:
      - setup: app
        build:
          base: nodejs@20
          buildCommands:
            - pnpm i
            - pnpm run build
          deployFiles:
            - dist
            - package.json
            - node_modules
          cache:
            - node_modules
            - pnpm-lock.yaml
        run:
          base: nodejs@20
          ports:
            - port: 3000
              httpSupport: true
          envVariables:
            PORT: 3000
            HOST: 0.0.0.0
          start: pnpm start
    ```
    </Fragment>
    <Fragment slot="yarn">
    ```yaml title="zerops.yml"
    zerops:
      - setup: app
        build:
          base: nodejs@20
          buildCommands:
            - yarn
            - yarn build
          deployFiles:
            - dist
            - package.json
            - node_modules
          cache:
            - node_modules
            - yarn.lock
        run:
          base: nodejs@20
          ports:
            - port: 3000
              httpSupport: true
          envVariables:
            PORT: 3000
            HOST: 0.0.0.0
          start: yarn start
    ```
    </Fragment>
  </PackageManagerTabs>

## Deploying

There are three ways to deploy your astro app in Zerops.

### Trigger the pipeline Using Zerops CLI (zcli)

<Steps>
1. Install the Zerops CLI.
		```shell
		# To download the zcli binary directly,
		# use https://github.com/zeropsio/zcli/releases
		npm i -g @zerops/zcli
		```

2. Open [`Settings > Access Token Management`](https://app.zerops.io/settings/token-management) in the Zerops app and generate a new access token.

3. Log in using your access token with the following command:
		```shell
		zcli login <token>
		```

4. Navigate to the root of your app (where `zerops.yml` is located) and run the following command to trigger the deploy:
		```shell
		zcli push
		```
</Steps>

### Trigger the pipeline using GitHub / GitLab
To setup continuous deployment on either a push to a branch or on a new release, go to your Node.js service detail and connect your Zerops service with a GitHub or GitLab repository.

### Importing an Existing Project
To setup continuous deployment on either a push to a branch or on a new release, go to your Node.js service detail and connect your Zerops service with a GitHub or GitLab repository.

<Steps>
1. Importing for Node.js deployment.
    ```yaml
    project:
      name: recipe-astro # creates a new project
      tags:
        - zerops-recipe

    # You can ignore the yaml above - if you already have project 
    # Just go to the project and then navigate to import a service button
    services:
      - hostname: app # should match with zerops.yml service name
        type: nodejs@20
        enableSubdomainAccess: true
        buildFromGit: https://github.com/zeropsio/recipe-astro-nodejs
    ```

2. Importing for Static deployment.
    ```yaml
    project:
      name: recipe-astro # creates a new project
      tags:
        - zerops-recipe

    # You can use the below if you already have project 
    # Just go to the project and then navigate to import a service button
    services:
      - hostname: app # should match with zerops.yml service name
        type: static@1.0 # should match with zerops.yml service name
        enableSubdomainAccess: true # enables zerops subdomain to preview the project
        buildFromGit: https://github.com/zeropsio/recipe-astro-static  # you can replace with your github repo if the project has zerops.yml
    ```
</Steps>



## Resources

- [Deploying Astro to Zerops in 3 mins](https://medium.com/@arjunaditya/how-to-deploy-astro-to-zerops-4230816a62b4)
- [Zerops Docs: Detailed guide to creating a Zerops Node.js service](https://docs.zerops.io/nodejs/how-to/create)
