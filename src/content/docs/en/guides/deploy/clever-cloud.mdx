---
title: Deploy your Astro Site to Clever Cloud
description: How to deploy your Astro site to the web on Clever Cloud.
type: deploy
i18nReady: true
---
import ReadMore from '~/components/ReadMore.astro';
import { Steps } from '@astrojs/starlight/components';
import { CardGrid, LinkCard } from '@astrojs/starlight/components';

[Clever Cloud](https://clever-cloud.com) is an European Platform as a Service that provides hightly automated and scalable services to enhance developers experience at industrial levels. 

This guide includes instructions for deploying to Clever Cloud through the console UI.

## Project Configuration

Your Astro project can be deployed on Clever Cloud in two different ways: as a **Static** application, or as a **Node.js** application, regardless of your `output` mode ([pre-rendered or on-demand](https://docs.astro.build/en/basics/rendering-modes/)). However, you'll need less configuration when deploying a Node.js application, since it works out-of-the-box with your `package.json`.

### Port and host

Applications on Clever Cloud listen on port **8080**. There are two ways to set your port and your host in Astro:

1. In `package.json` scripts:

    ```json title="package.json" "astro preview --host 0.0.0.0 --port 8080"
     "scripts": {
    "start": "astro dev --host 0.0.0.0 --port 8080",
    "build": "astro build"
    } 
    ```

2. In `astro.config.mjs`:

    ```javascript
    import { defineConfig } from 'astro/config';

    export default defineConfig({
        server: {
            port: 8080,
            host: true
        }
    });
    ```


## Deploy Astro from the Console

When deploying on Clever Cloud, follow the application wizard to deploy your astro site. These are the detailed steps:

<Steps>

1. From the lateral menubar, click **Create** > **An application**
2. Choose how to deploy:

    - **Create a brand new app**: to deploy from a local repository with Git
    
    or
    
    - **Select a GitHub repository**: to deploy from GitHub

3. Select a **Node.js** application, or a **Static** one.
	4. Set up the minimal size for your instance and scalability options: Astro can be deployed in a **Nano** instance as minimal size. Instance sizes depends of your application specifications and dependencies. We suggest you start with the smallest instance and then adjust accordingly as you watch the metrics from the **Overview** page.
5. Select a **region** where to deploy your instance.
6. **Add-ons**: Unless you're using a database or Keycloak, you shouldn't need any add-on. See [Further Configuration](#further-configuration) if you do.
7. Inject **environment variables**:

    - For **Node.js**, no specific environment variable is needed to deploy Astro.

    - For a **Static** application, add these variables:

    ```shell
    CC_POST_BUILD_HOOK="npm run build"
    CC_PRE_BUILD_HOOK="npm install && npm run astro telemetry disable"
    CC_WEBROOT="/dist"
    ````
8. **Deploy!** If you're deploying from **GitHub**, your deployment should start automatically. If you're using **Git**, copy the remote and push on **master** branch. 

</Steps>

:::tip[Other Branches]
Deploy from other branches than `master` branch by using `git push clever <branch>:master`. For example, if you don't want to rename your local `main` branch, use `git push clever main:master`.
:::

## Further configuration

This section explores further configuration for your Astro application on Clever Cloud.

### Scalability

Enable auto-scalability in **Scalability** option, to automatically allocate ressources to the server according to its consumption. This is especially recommended if your Astro app uses Server-Side Rendering (SSR).

#### Dedicated build instance

Aditionnally, enabling a dedicated build instance is available from the **Information** otpion in your application menu. Once the build succeeds, your application runs in the minimal instance size you've set.

Check your metrics in the application **Overview** during build, and activate if you see consumption pics during the build phase.  

Click the Grafana icon on the metrics overview to access the application dedicated Grafana dashboard for more detailed metrics.

### Add-ons: Databases, Keycloak, Analytics

Clever Cloud provides different add-ons you could find useful to connect to your Astro application, such as:

- **Databases**: PostrgreSQL, MySQL, MongoDB, Redis...
- **Keycloak**: If your application uses [Keycloak auth provider from Auth.js](https://authjs.dev/getting-started/authentication/oauth), Clever Cloud provides a Keykloak add-on.
- **Matomo**: To monitor your application web analytics as an alternative to Google Analytics.

To connect a service to your Astro application, create an add-on and connect it to your application directly from the Console. See all available add-ons on [Clever Cloud documentation](https://developers.clever-cloud.com/doc/addons/).

<CardGrid>
  <LinkCard
    title="Node.js documentation"
    description="Clever Cloud documentation on Node.js applications."
    href="https://developers.clever-cloud.com/doc/applications/javascript/nodejs/"
  />
  <LinkCard
    title="Static documentation"
    description="Clever Cloud documentation on Static applications."
    href="https://developers.clever-cloud.com/doc/applications/static/"
  />
</CardGrid>