---
type: integration
title: '@astrojs/react'
description:  "@astrojs/reactを使用してAstroのコンポーネントサポートを拡張する方法"
githubIntegrationURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/react/'
category: renderer
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'

この**[Astroインテグレーション][astro-integration]**は[React](https://react.dev/)コンポーネントのサーバーサイドレンダリング（SSR）とクライアントサイドのハイドレーションを可能にします。

## インストール

Astroには、公式インテグレーションのセットアップを自動化するための`astro add`コマンドがあります。これを使用しない場合は、代わりにインテグレーションの[手動インストール](#手動でのインストール)も可能です。

`@astrojs/react`をインストールするには、下のコマンドをプロジェクトのディレクトリから実行し、プロンプトに従ってください。

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npx astro add react
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm astro add react
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn astro add react
  ```
  </Fragment>
</PackageManagerTabs>

問題に遭遇した場合、[気軽にGithubで発生した問題についてお知らせください](https://github.com/withastro/astro/issues) 
また、問題が発生した場合は手動でインストールに挑戦する事も出来ます。

### 手動でのインストール

最初に`@astrojs/react`パッケージを以下のコマンドでインストールする必要があります。

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install @astrojs/react
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add @astrojs/react
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add @astrojs/react
  ```
  </Fragment>
</PackageManagerTabs>

ほとんどのパッケージマネージャーは関連しているパッケージも一緒にインストールするようになっています。 もし "Cannot find package 'react'" (や似たようなエラー) がAstroをスタートした時に表示された場合、以下の方法で`react`と`react-dom`をインストールする必要があります。

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install react react-dom
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add react react-dom
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add react react-dom
  ```
  </Fragment>
</PackageManagerTabs>

これらのステップが完了したら、 `astro.config.*`の`integrations`プロパティからインテグレーションを有効化する必要があります。

```js ins="react()" ins={2} title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import react from '@astrojs/react';

export default defineConfig({
  // ...
  integrations: [react()],
});
```

## スターターガイド
AstroでReactComponentを使用する方法を詳しく知るには、[UIフレームワークドキュメント][astro-ui-frameworks]をご一読ください。ドキュメントからは、

* 📦 どうコンポーネントがロードされるか
* 💧 クライアントサイドのハイドレーション
* 🤝 複数のフレームワークを合わせて使う方法

について学ぶことが出来ます。
## オプション

### 複数のJSXフレームワークを一緒に使用する

(React, Preact, Solid)などの複数のJSXフレームワークを同一のプロジェクトで使用している場合、 AstroがそれぞれのコンポーネントがどのJSXフレームワークを使用するか判断するために設定の記載が必要です。JSXフレームワークを一つのみ導入している場合は特別な設定を記述する必要はありません。

`include` (required)と`exclude` (optional)オプションを使用してどのコンポーネントはどのフレームワークを使用するのか設定して下さい。設定では、特定のフレームワークを適用したいファイル、またはフォルダーが入った配列を`include`に含めて下さい。この時複数のファイルパスを含めるためにイルドカードを使用する事も出来ます。
Astroは同じフレームワークを使用するコンポーネントをまとめたフォルダー(`/components/react`や`/components/solid`など)を、使用しているフレームワークにつき一つずつ作成することを推奨していますが必須ではありません。

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // Astroが複数のフレームワークを同時使用することが以下のコードで可能になります。
  // JSXを一つだけ使用している場合は`include`を含める必要はありません。
  integrations: [
    preact({
      include: ['**/preact/*'],
    }),
    react({
      include: ['**/react/*'],
    }),
    solid({
      include: ['**/solid/*'],
    }),
  ],
});
```

### 小要素への受け渡し
AstroコンポーネントからReactコンポーネントへ渡される子要素は、Reactノードでは無く一般的なStringで渡されます。

例えば、下の`<ReactComponent />`には小要素が一つしか渡されませません。

```astro
---
import ReactComponent from './ReactComponent';
---

<ReactComponent>
  <div>one</div>
  <div>two</div>
</ReactComponent>
```

もし異なる場所に異なる要素を追加できるライブラリーのような、1つ以上の子が渡される事を*想定*しているライブラリーを使用している場合、この機能は邪魔になる事もあるかも知れません。 
この場合、実験的な`experimentalReactChildren`フラグを立ててAstroに`ReactNode`として必ず渡すよう伝えることが出来ます。このフラグを立てることで起きる犠牲はありますが、互換性を向上させるのに役立ちます。

このオプションは、Reactインテグレーションの設定から有効に出来ます。

```js title="astro.config.mjs" ins={8}
import { defineConfig } from 'astro/config';
import react from '@astrojs/react';

export default defineConfig({
  // ...
  integrations: [
    react({
      experimentalReactChildren: true,
    }),
  ],
});
```

[astro-integration]: /en/guides/integrations-guide/

[astro-ui-frameworks]: /en/guides/framework-components/#using-framework-components
