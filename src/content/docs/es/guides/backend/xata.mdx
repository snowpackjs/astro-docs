---
title: Xata y Astro
description: Agrega una base de datos sin servidor con búsqueda de texto completo a tu proyecto con Xata
type: backend
service: Xata
stub: false
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import FileTree from '~/components/FileTree.astro'


[Xata](https://xata.io) es una **Plataforma de Datos sin Servidor** que combina las características de una base de datos relacional, un motor de búsqueda y un motor de análisis al exponer una única API REST consistente.

## Agregando una base de datos con Xata

### Prerequisitos

- Una cuenta de [Xata](https://app.xata.io/signin) con una base de datos creada. (Puedes usar la base de datos de ejemplo desde la interfaz web).
- Un Token de Accesos (`XATA_API_KEY`).
- Tu URL de la base de datos.

Después de actualizar e inicializar la [línea de comandos de Xata](https://xata.io/docs/getting-started/installation), tendrás tu token de API en tu archivo `.env` y la URL de la base de datos definida.

```ini title=".env"

Al final de la configuración, deberías tener:

```ini title=".env"
XATA_API_KEY=hash_key

# Una rama de Xata que será usada
# Si no existe una rama de xata con
# el mismo nombre que tu rama git
XATA_FALLBACK_BRANCH=main
```

Y la `databaseURL` definida:

```ini title=".xatarc"
{
  "databaseUrl": "https://your-database-url"
}
```

### Configuración del entorno

Para tener IntelliSense y seguridad de tipos para tus variables de entorno, edita o crea el archivo `env.d.ts` en tu directorio `src/`:

```ts title="src/env.d.ts"
interface ImportMetaEnv {
  readonly XATA_API_KEY: string;
  readonly XATA_FALLBACK_BRANCH?: string;
}

interface ImportMeta {
  readonly env: ImportMetaEnv;
}
```

:::tip
Lee más sobre [variables de entorno](/es/guides/environment-variables/) y archivos `.env` en Astro.
:::

Using the codegeneration from the Xata CLI and choosing the TypeScript option, generated an instance of the SDK for you, with types tailored to your database schema. Additionally, `@xata.io/client` was added to your `package.json`.

Your Xata environment variables and database url were automatically pulled by the SDK instance, so there's no more setup work needed.

Now, your project should have the following structure:

<FileTree title="Project Structure">
- src/
  - **xata.codegen.ts**
  - **env.d.ts**
- **.env**
- astro.config.mjs
- package.json
- **.xatarc**
</FileTree>

## Create your queries

To query your posts, import and use `getXataClient()` in a `.astro` file. The example below queries the first 50 posts from Xata's Sample Blog Database.

```astro title="src/pages/blog/index.astro"
---
import { getXataClient } from "../xata.codegen";

const xata = getXataClient();
const { records } = await xata.db.Posts.getPaginated({
  pagination: {
    size: 50
  }
})
---

<ul>
  {records.map(post) => (
    <li>{post.title}</li>
  )}
</ul>
```
It's important to note the SDK needs to be regenerated everytime your schema changes. So, avoid making changes to the generated files the Xata CLI creates because once schema updates, your changes will be overwritten.


## Official Resources
- [Xata Astro Starter](https://github.com/xataio/examples/tree/main/apps/starter-astro)
- [Xata Docs: Quick Start Guide](https://xata.io/docs/getting-started/quickstart-astro)
